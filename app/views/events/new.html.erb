<% @title = "Create an Event"
@body_class = "blue"%>

<section class="wizard container">
  <div class="row">
    <%= form_for @event, html: {class: "span6 offset3 box shadow event", data: {step: "1"}} do |f| %>
      <div class="top">
        <h2>So, what's the occasion?</h2>
        <p>Just name your event to get started. Try it for free, pay when you're ready.</p>
      </div>
      
      
      <div class="light_blue">
        
        <div class="invitation active" data-step="1">
          <span class="invite bold upcase">An invitation to</span>
          <%= f.text_field :name, "placeholder" => "Name your special occasion", :class=>"large brand" %>
          <hr />
        </div>
        
        <div class="map hidden" data-step="2">
          <div id="float_over_google_map">
            <%= f.text_field :location, "placeholder" => "Find an address", :class=>"span4 grey_border", :tabindex => 1 %>
            <%= f.hidden_field :latitude %>
            <%= f.hidden_field :longitude %>
          </div>
          <div id="google_map">
          </div>
        </div>
        
        <div class="time hidden" data-step="3">
          <div class="datepicker" data-input="#event_starts"></div>
          <%= f.hidden_field :starts %>
          <%= f.hidden_field :ends %>
        </div>
        
        <div class="code hidden" data-step="4">
          
          <%= f.hidden_field :is_public %>

          
          
          <div class="btn-group privacy">
            <a class="btn active" data-val="public" href="#">Public</a>
            <a class="btn" data-val="private" href="#">Private</a>
          </div>
          

          <div class="explanation center bottom_pad">
            <div class="public">
              <p>
                <i class="icon-eye-open"></i>
                Public: Any one can view photos at usnap.us/<span id="event_code_tip"><%= @event.code %></span>
              </p>
            </div>
            <div class="private hidden">
              <p>
                <i class="icon-lock"></i>
                Private: Guests need to log in to see photos
              </p>
            </div>
          </div>
          
          <div class="event_code">
            <%= f.text_field :code, :class => "input-small", value: @event.code %>
          </div>
          
          <div class="explanation center ">
              <p>
                <i class="icon-map-marker"></i>
                Use this code to snap photos at other locations
              </p>
          </div>
          
        </div>
        
      </div>
      
      
      
      <div class="bottom row">
        <p class="span2">
          <%= link_to "Cancel", "#", class: "cancel" %>
        </p>
        <p class="steps span2">
          <%= link_to raw("&bull;"), "#", class: "active", data: {step: 1} %>
          <%= link_to raw("&bull;"), "#", data: {step: 2} %>
          <%= link_to raw("&bull;"), "#", data: {step: 3} %>
          <%= link_to raw("&bull;"), "#", data: {step: 4} %>
        </p>
        <p class="pull-right span2">
          <%= link_to "Next", "", class: "btn btn-large green disabled next" %>
        </p>
      </div>
    <% end %>
  </div>
</section>


<% content_for(:post_scripts) do %>
  <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
  <%= stylesheet_link_tag "jquery-ui-1.8.18" %>
<% end %>
<% content_for(:jquery) do %>
  var six_am_in_ms = 6*60*60*1000;
  
  $(".datepicker").datepicker({
		minDate: 0,
		altField: "#event_starts",
		dateFormat: "@",
	});
<% end %>

<div id="date_incrementer" class="date_incrementer">
  <div class="arrow_wrap">
    <span>Duration</span><a class="minus"><i class="icon-minus"></i></a><a class="plus"><i class="icon-plus"></i></a>
  </div>
</div>

<script type="text/html" id="map_template">
  
</script>
