<% @title = "Create an Event"
@body_class = "blue"%>

<!-- Google Website Optimizer Tracking Script -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['gwo._setAccount', 'UA-59005-2']);
  _gaq.push(['gwo._trackPageview', '/0830794402/goal']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- End of Google Website Optimizer Tracking Script -->

<section class="wizard container">
  <div class="row">
    <%= form_for @event, html: {class: "span6 offset3 box form-horizontal box_shadow event", data: {step: "1", max_step: "1"}} do |f| %>
      <div class="top">
        <h2 class="title">Checkout</h2>
        <p class="subtitle">Enter your billing details into the secure form below to complete your purchase.</p>
        <p class="subtitle">You will be charged US$199.</p>
      </div>
      
      
      <div class="light_blue">
        
        <div class="billing active" data-step="0">
          
          <div class="control-group">
            <label for="number">Card Type</label>
            <div class="controls">
              <%= select_tag :number, options_for_select(["Visa", "Mastercard"]), class: "span2" %>
            </div>
          </div>
          
          <div class="control-group">
            <label for="number">Card Number</label>
            <div class="controls">
              <%= text_field_tag :number %>
            </div>
          </div>
          
          <div class="control-group">
            <label for="number">Card Holder Name</label>
            <div class="controls">
              <%= text_field_tag :number %>
            </div>
          </div>
          
          <div class="control-group">
            <label for="number">Expiry Date</label>
            <div class="controls">
              <%= select_tag :number, options_for_select(("01".."12")), class: "span1" %>
              <%= select_tag :number, options_for_select(Date.today.year..Date.today.year + 7), class: "span1" %> 
            </div>
          </div>
          
          <div class="control-group">
            <label for="number">3 Digit Security Code</label>
            <div class="controls">
              <%= text_field_tag :number, "", class: "span1" %><i class="icon-question-sign" style="padding: 10px 0 0 4px"></i>
            </div>
          </div>
          
          <div class="" style="width:100%;padding-top:20px">
            <p style='color:#999;padding: 10px 0 0 0;float:left'>
              All purchases are subject to our <a>Terms of Use</a>
            </p>
            <%= content_tag :button, type: :submit, class: "btn btn-large btn-green", style: "float:right" do %>
              Buy Now
            <% end %>
          </div>
          <br /><br />
        </div>
        
        <div class="invitation hidden" data-step="1">
          <span class="invite bold upcase">An invitation to</span>
          <%= f.text_field :name, "placeholder" => "Name your special occasion", :class=>"large brand" %>
          <hr />
        </div>
        
        <div class="map hidden" data-step="2">
          <div id="float_over_google_map" class="span6">
            <%= f.text_field :location, "placeholder" => "Find an address", :class=>"span4 large brand", :tabindex => 1 %>
            <hr />
            <%= f.hidden_field :latitude %>
            <%= f.hidden_field :longitude %>
          </div>
          <div id="google_map">
          </div>
        </div>
        
        <div class="time hidden" data-step="3">
          <div class="datepicker" data-input="#event_starts"></div>
          <%= f.hidden_field :starts %>
          <%= f.hidden_field :ends %>
        </div>
        
        <div class="code hidden" data-step="4">
          
          <%= f.hidden_field :is_public %>

          
          
          <div class="btn-group privacy">
            <a class="btn active" data-val="public" href="#">Public</a>
            <a class="btn" data-val="private" href="#">Private</a>
          </div>
          

          <div class="explanation center bottom_pad">
            <div class="public">
              <p>
                <i class="icon-eye-open"></i>
                Public: Any one can view photos at usnap.us/<span id="event_code_tip"><%= @event.code %></span>
              </p>
            </div>
            <div class="private hidden">
              <p>
                <i class="icon-lock"></i>
                Private: Guests need to log in to see photos
              </p>
            </div>
          </div>
          
          <div class="event_code input-prepend">
            <span class="add-on">@</span>
            <%= f.text_field :code, :class => "input-small", value: @event.code %>
          </div>
          
          <div class="explanation center ">
            <p>
              <i class="icon-map-marker"></i>
              Use this code to snap photos at other locations
            </p>
          </div>
          <div class="explanation center red valid_chars">
            <p>
              <i class="icon-exclamation-sign"></i>
              Sorry, you can only use letters, numbers and dashes.
            </p>
          </div>
          
        </div>
        
        <div class="payment hidden" data-step="5">
          <div class="check_me">
            <p>
              <%= check_box_tag "accept" %>
              <label for="accept">&nbsp;&nbsp;I agree to the <%= link_to "Terms of Use", terms_of_use_path, target: "blank" %> and I've read the <%= link_to "Privacy Policy", privacy_policy_path, target: "blank" %>.</label></p>
          </div>
          <div class="">
            <%= content_tag :button, type: :submit, class: "btn btn-large btn-green round" do %>
              Purchase now for US$<span class="price"><%= @price %></span>
            <% end %>
          </div>
          <h3>Or try it for free with a few limitations</h3>
          <p>
            Only the first 10 photos will be visible, and they'll be removed 30 days after they're shared.
          </p>
          <p>
            You can purchase at any time to show all shared photos, and they'll never be removed.
          </p>
        </div>
        
      </div>
      
      
      
      <div class="bottom row">
        <p class="span2">
          <%= link_to "Cancel", "#", class: "cancel" %>
        </p>
        <p class="steps span2">
          <%= link_to raw("&bull;"), "#", data: {step: 1} %>
          <%= link_to raw("&bull;"), "#", data: {step: 2} %>
          <%= link_to raw("&bull;"), "#", data: {step: 3} %>
          <%= link_to raw("&bull;"), "#", data: {step: 4} %>
          <%= link_to raw("&bull;"), "#", class: "active",data: {step: 5} %>
        </p>
        <p class="pull-right span2">
          <%= link_to "Next", "", class: "disabled btn btn-large btn-blue hidden round next" %>
          <%= f.hidden_field :free %>
          <%= f.submit "Try it for free", class: "btn btn-large btn-blue round hidden free" %>
        </p>
      </div>
    <% end %>
  </div>
</section>


<% content_for(:post_scripts) do %>
  <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
  <%= stylesheet_link_tag "jquery-ui-1.8.18" %>
<% end %>
<% content_for(:jquery) do %>
  var six_am_in_ms = 6*60*60*1000;
  
  $(".datepicker").datepicker({
		minDate: 0,
		altField: "#event_starts",
		dateFormat: "@",
	});
<% end %>