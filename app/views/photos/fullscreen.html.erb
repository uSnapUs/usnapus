<% @topbar_class = "hidden" %>

<div class="branding_overlay">
  <%= link_to (image_tag "logo-header.png", :title => "Powered by uSnap.us"), event_photos_path(@event) %>
</div>

<!--Thumbnail Navigation-->
<div id="prevthumb"></div>
<div id="nextthumb"></div>

<!--Arrow Navigation-->
<a id="prevslide" class="load-item"></a>
<a id="nextslide" class="load-item"></a>

<div id="thumb-tray" class="load-item">
	<div id="thumb-back"></div>
	<div id="thumb-forward"></div>
</div>

<!--Time Bar-->
<div id="progress-back" class="load-item">
	<div id="progress-bar"></div>
</div>

<!--Control Bar-->
<div id="controls-wrapper" class="load-item">
	<div id="controls">
		
		<a id="play-button">
		  <%= image_tag "supersized/pause.png", :id => "pauseplay" %>
		</a>
	
		<!--Slide counter-->
		<div id="slidecounter">
			<span class="slidenumber"></span> / <span class="totalslides"></span>
		</div>
		
		<!--Slide captions displayed here-->
		<div id="slidecaption"></div>
		
		<!--Thumb Tray button-->
		<a id="tray-button">
		  <%= image_tag "supersized/button-tray-up.png", :id => "tray-arrow" %>
		</a>
		
		<!--Navigation-->
		<ul id="slide-list"></ul>
		
	</div>
</div>

<% content_for(:head) do %>
  <%= stylesheet_link_tag "supersized", "supersized.shutter" %>
<% end %>
<% content_for(:extra_scripts) do %>
  <%= javascript_include_tag "jquery.easing.min", "supersized.3.2.6.min", "supersized.shutter.min" %>
<% end %>

<%= content_for(:jquery) do %>
  
  var photos = []
  var photo_url = "<%= "/events/#{@event.id}/photos"%>";
  
  //Load all the photos asynchronously on page load
  $.getJSON(photo_url, function(data){
    
    $.each(data, function(i, photo_data) {
      
      photos.push({
        image: photo_data["photo"]["url"],
        thumb: photo_data["photo"]["polaroid"]["url"],
        title: "Photo by "+photo_data["device_name"]
      });
    });
    
    $.supersized({
			slide_interval:   3000,
			transition:   3,
			transition_speed		:	700,						
			slide_links				:	'blank',
			slides 					: photos,
			horizontal_center: 1,
			vertical_center: 1
		});
    
  });
  
  $(document).keyup(function(e) {
    if (e.keyCode == 27) { window.location = photo_url; }   // esc
  });
		
<% end %>